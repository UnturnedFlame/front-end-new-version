import{c as n,I as S,d as U,r as V,a as $,u as B,b as c,o as M,e as N,w as i,f as a,g as w,h as A,i as u,j as E,E as _,p as L,k as R,_ as q}from"./index-BeHN7UMk.js";var H={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"};function O(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?Object(arguments[t]):{},s=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(e).filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable}))),s.forEach(function(l){T(r,l,e[l])})}return r}function T(r,t,e){return t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}var h=function(t,e){var s=O({},t,e.attrs);return n(S,O({},s,{icon:H}),null)};h.displayName="LockOutlined";h.inheritAttrs=!1;var D={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M858.5 763.6a374 374 0 00-80.6-119.5 375.63 375.63 0 00-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1-.4.2-.8.3-1.2.5-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 00-80.6 119.5A371.7 371.7 0 00136 901.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8 2-77.2 33-149.5 87.8-204.3 56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 008-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z"}}]},name:"user",theme:"outlined"};function x(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?Object(arguments[t]):{},s=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(e).filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable}))),s.forEach(function(l){G(r,l,e[l])})}return r}function G(r,t,e){return t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}var v=function(t,e){var s=x({},t,e.attrs);return n(S,x({},s,{icon:D}),null)};v.displayName="UserOutlined";v.inheritAttrs=!1;const f=r=>(L("data-v-766842b3"),r=r(),R(),r),J={class:"login-body"},Z=f(()=>a("div",{class:"system-name"},[u("欢迎使用"),a("span",null,[u("轨道车辆智能运维通用算法和工具软件"),a("br"),u("(Beta测试版)")])],-1)),F={class:"login-panel"},Q=f(()=>a("div",{class:"login-title"},"用户登录",-1)),W=f(()=>a("div",{style:{"text-align":"left","font-size":"18px",color:"#808080"}},"账号",-1)),X=f(()=>a("div",{style:{"text-align":"left","font-size":"18px",color:"#808080"}},"密码",-1)),Y={style:{position:"absolute",right:"5px",bottom:"0px"}},K=f(()=>a("div",{style:{color:"black",width:"400px",height:"100%","line-height":"20px"}},[u(" © 2024 国家高速列车青岛技术创新中心 "),a("br"),u(" 联系我们：nichst@163.com | 电话：123456 "),a("br"),u(" 西南交通大学研制 ")],-1)),ee=U({__name:"home",setup(r){const t=V(),e=$({username:"",password:""}),s=()=>{g.push("/resetPassword")},l={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:15,message:"用户名长度需在3~15个字符之间",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"},{min:8,message:"密码长度必须至少为8位",trigger:"blur"},{pattern:/^(?=.*[A-Z])(?=.*[a-z])(?=.*\d).+$/,message:"密码必须包含数字、大小写字母",trigger:"blur"}],role:[{required:!0,message:"请选择用户级别",trigger:"change"}]},g=B(),b=()=>{var y=JSON.stringify(e);t.value.validate().then(()=>{E.post("/login/",y).then(o=>{if(o.statusText=="OK")if(o.data.code!=200){_.error(o.data.message);return}else{_({message:"登录成功",type:"success"});let d=o.data.role,m=o.data.token;window.sessionStorage.setItem("jwt",m),window.sessionStorage.setItem("username",e.username),window.sessionStorage.setItem("role",d),d=="user"||d=="superuser"?g.push("/UserPlatform"):g.push("/admin")}}).catch(o=>{console.error("请求错误：",o),_.error("服务器出错，请稍微重试")})})};return(y,o)=>{const d=c("a-input"),m=c("a-form-item"),z=c("a-button"),P=c("a-form"),j=c("el-button"),k=c("el-main"),C=c("el-footer"),I=c("el-container");return M(),N(I,null,{default:i(()=>[n(k,{style:{height:"93vh"}},{default:i(()=>[a("div",J,[Z,a("div",F,[Q,n(P,{model:e,rules:l,ref_key:"formRef",ref:t,style:{width:"70%",height:"80%"}},{default:i(()=>[W,n(m,{name:"username"},{default:i(()=>[n(d,{placeholder:"请输入账号",value:e.username,"onUpdate:value":o[0]||(o[0]=p=>e.username=p),size:"large",type:"text"},{prefix:i(()=>[n(w(v))]),_:1},8,["value"])]),_:1}),X,n(m,{name:"password"},{default:i(()=>[n(d,{placeholder:"请输入密码",value:e.password,"onUpdate:value":o[1]||(o[1]=p=>e.password=p),size:"large",type:"password",onKeyup:o[2]||(o[2]=A(p=>b(),["enter","native"]))},{prefix:i(()=>[n(w(h))]),_:1},8,["value"])]),_:1}),n(m,{label:""},{default:i(()=>[n(z,{type:"primary","html-type":"submit",style:{width:"100%","margin-top":"20px",height:"40px","background-color":"#8C8C8C","font-size":"18px"},onClick:o[3]||(o[3]=p=>b()),size:"large"},{default:i(()=>[u("登录")]),_:1})]),_:1})]),_:1},8,["model"]),a("div",Y,[n(j,{onClick:s,class:"button",style:{}},{default:i(()=>[u(" 忘记密码? ")]),_:1})])])])]),_:1}),n(C,{style:{height:"7vh","background-color":"white",display:"flex","justify-content":"center","align-items":"center"}},{default:i(()=>[K]),_:1})]),_:1})}}}),re=q(ee,[["__scopeId","data-v-766842b3"]]);export{re as default};
