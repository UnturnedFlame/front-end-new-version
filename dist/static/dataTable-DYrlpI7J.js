import{_ as C,r as B,l as T,n as E,f as h,c as e,w as t,F as I,u as z,j as m,x as b,E as n,b as l,o as D,i,p as M,k as N}from"./index-BeHN7UMk.js";const S=s=>(M("data-v-b2390cfc"),s=s(),N(),s),V=S(()=>h("div",{class:"shadow-border title-container",style:{}}," 用户数据管理 ",-1)),F={class:"table-container"},$={__name:"dataTable",setup(s){const _=z(),r=B([]),g=async()=>{try{m.get("administration/fetch_users_datafiles/").then(o=>{o.data.code===401?b.alert("登录状态已失效，请重新登陆","提示",{confirmButtonText:"确定",callback:d=>{_.push("/")}}):r.value=o.data})}catch{n({message:"获取用户数据失败，请稍后重试",type:"error"})}};T(()=>{g()});const y=async(o,d)=>{try{m.get("administration/delete_user_datafile/?datafile_id="+d.id).then(a=>{a.data.code==200?(n({message:a.data.message,type:"success"}),r.value.splice(o,1)):n({message:"文件删除失败,"+a.data.message,type:"error"}),a.data.code==401&&b.alert("登录状态已失效，请重新登陆","提示",{confirmButtonText:"确定",callback:c=>{_.push("/")}})})}catch{n({message:"删除失败，请稍后重试",type:"error"})}};return(o,d)=>{const a=l("el-table-column"),c=l("el-button"),p=l("el-col"),x=l("el-row"),k=l("el-popconfirm"),w=l("el-table");return D(),E(I,null,[V,h("div",F,[e(w,{data:r.value,height:"500px",stripe:!0,border:"","header-cell-style":{backgroundColor:"#f5f7fa",color:"#606266"}},{default:t(()=>[e(a,{prop:"dataset_name",label:"文件名"}),e(a,{prop:"description",label:"文件描述"}),e(a,{prop:"owner",label:"所有者"}),e(a,{label:"操作"},{default:t(u=>[e(k,{title:"你确定要删除该用户数据吗?",onConfirm:f=>y(u.$index,u.row),width:"200px"},{reference:t(()=>[e(c,{size:"small",type:"danger",style:{width:"100px"}},{default:t(()=>[i("删除")]),_:1})]),actions:t(({confirm:f,cancel:v})=>[e(x,null,{default:t(()=>[e(p,{span:12},{default:t(()=>[e(c,{size:"small",onClick:v},{default:t(()=>[i("取消")]),_:2},1032,["onClick"])]),_:2},1024),e(p,{span:12},{default:t(()=>[e(c,{type:"primary",size:"small",onClick:f},{default:t(()=>[i(" 确定 ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])])],64)}}},R=C($,[["__scopeId","data-v-b2390cfc"]]);export{R as default};
